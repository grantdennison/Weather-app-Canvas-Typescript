(()=>{"use strict";var t={d:(e,i)=>{for(var a in i)t.o(i,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:i[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{Do:()=>a,Dt:()=>r,Rm:()=>s,qN:()=>n});class e{x;y;tileH;divW;colour;tileText;textX;textY;img1X;img1Y;img2X;img2Y;img3X;img3Y;img3TX;img3TY;date;constructor(t,e,i,a,r,s,n,h,m,o,g,d,l,x,c,w){this.x=t,this.y=e,this.tileH=i,this.divW=a,this.colour=r,this.tileText=s,this.textX=n,this.textY=h,this.img1X=m,this.img1Y=o,this.img2X=g,this.img2Y=d,this.img3X=l,this.img3Y=x,this.img3TX=c,this.img3TY=w,this.date=this.tileText.day.split(", ")}draw(){a.globalAlpha=.4,a.fillStyle=this.colour,a.fillRect(this.x,this.y,this.divW,this.tileH),a.beginPath(),a.lineWidth=.2,a.rect(this.x,this.y,this.divW,this.tileH),a.stroke(),a.globalAlpha=1,a.strokeStyle="black",a.fillStyle="white",a.lineWidth=4,a.font="italic  30px LatoWeb",a.strokeText(`${this.date[0]} ~`,15+this.x,33+this.y),a.fillText(`${this.date[0]} ~`,15+this.x,33+this.y),a.font="italic  18px LatoWeb",a.strokeText(this.date[1],this.textX+this.x,this.textY+this.y),a.fillText(this.date[1],this.textX+this.x,this.textY+this.y),a.font="italic  35px LatoWeb",a.strokeText(this.tileText.temperature,this.x+this.img1X+50,this.y+this.img1Y+50),a.fillText(this.tileText.temperature,this.x+this.img1X+50,this.y+this.img1Y+50),a.font="italic  35px LatoWeb",a.strokeText(this.tileText.wind,this.x+this.img2X+60,this.y+this.img2Y+50),a.fillText(this.tileText.wind,this.x+this.img2X+60,this.y+this.img2Y+50),a.drawImage(s,this.x+this.img1X,this.y+this.img1Y,60,60),a.drawImage(n,this.x+this.img2X,this.y+this.img2Y,60,60),this.img3X&&this.img3Y&&this.img3TX&&this.img3TY&&(a.drawImage(r,this.x+this.img3X,this.y+this.img3Y,100,100),a.font="italic  30px LatoWeb",a.strokeText(this.tileText.description,this.x+this.img3X+this.img3TX,this.y+this.img3Y+this.img3TY),a.fillText(this.tileText.description,this.x+this.img3X+this.img3TX,this.y+this.img3Y+this.img3TY))}}const i=document.getElementById("canvas1"),a=i.getContext("2d"),r=new Image,s=new Image,n=new Image,h=["./img/sun.png","./img/thermo.png","./img/wind.png"],m=[r,s,n];var o=0;for(let t=0;t<m.length;t++)m[t].src=h[t],m[t].onload=()=>{(o+=1)===m.length&&H()};let g=window.innerWidth,d=window.innerHeight,l=150,x=200,c=(d-x-450)/2,w="black",y=g/1.2-100,p=l/2.2,u=g-g/1.2/2,X=l/2.2;const Y={day:(new Date).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),temperature:"0 °C ",wind:"0 km/h",description:"Clear"},f={day:new Date((new Date).getTime()+864e5).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),temperature:"0 °C ",wind:"0 km/h"},T={day:new Date((new Date).getTime()+1728e5).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),temperature:"0 °C ",wind:"0 km/h"},v={day:new Date((new Date).getTime()+2592e5).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),temperature:"0 °C ",wind:"0 km/h"};!async function(){let t=await function(t){const e=localStorage.getItem("weather");if(e){const t=JSON.parse(e);if(t.expiry&&t.expiry>Date.now())return t.value}return!1}();t||(t=await async function(){try{const t=await fetch("https://goweather.herokuapp.com/weather/london"),e=await t.json();if(![e.temperature,e.wind,e.description,e.forecast[0].day,e.forecast[0].temperature,e.forecast[0].wind,e.forecast[1].day,e.forecast[1].temperature,e.forecast[1].wind,e.forecast[2].day,e.forecast[2].temperature,e.forecast[2].wind].every((t=>"string"==typeof t)))throw"Type error please contact Api administrator";return e}catch(t){alert(`Unable to updatedate reason: ${t}`)}}(),function(t,e){const i={value:e,expiry:Date.now()+9e5};localStorage.setItem("weather",JSON.stringify(i))}(0,t)),Y.temperature=t.temperature,Y.wind=t.wind,Y.description=t.description,f.temperature=t.forecast[0].temperature,f.wind=t.forecast[0].wind,T.temperature=t.forecast[1].temperature,T.wind=t.forecast[1].wind,v.temperature=t.forecast[2].temperature,v.wind=t.forecast[2].wind,H()}(),i.width=g,i.height=d;const W=new e(g-g/1.2/2,c,x,g/1.2,w,Y,y,30,0,p,u,X,0,0,1,1),k=new e(g-g/1.2/2,c+x,l,g/1.2,w,f,y,30,0,p,u,X),D=new e(g-g/1.2/2,c+l+x,l,g/1.2,w,T,y,30,0,p,u,X),b=new e(g-g/1.2/2,c+300+x,l,g/1.2,w,v,y,30,0,p,u,X);function H(){let t;W.img3TX=110,W.img3TY=60,i.width=g,d<650&&(d=650),i.height=d,c=(d-x-450)/2,g<1e3?(g<400&&(g=400),t=g/1.2,i.width=g,W.divW=k.divW=D.divW=b.divW=t,k.tileH=D.tileH=b.tileH=l,W.y=c,k.y=c+x,D.y=c+l+x,b.y=c+300+x,W.x=k.x=D.x=b.x=(g-t)/2,W.img1X=k.img1X=D.img1X=b.img1X=0,W.img1Y=x/3,k.img1Y=D.img1Y=b.img1Y=75,W.img2X=0,k.img2X=D.img2X=b.img2X=g/2.5,W.img2Y=x/1.5,k.img2Y=D.img2Y=b.img2Y=75,g>570?(W.img3X=t-300,W.img3Y=x/3):(W.img3X=t-140,W.img3Y=x/4.3,W.img3TX=10,W.img3TY=130),W.textX=k.textX=D.textX=b.textX=t-100,W.textY=k.textY=D.textY=b.textY=30):(c=(d-x-l)/2,t=g>1300?1300/1.2:g/1.2,k.tileH=D.tileH=b.tileH=x,W.divW=t,k.divW=D.divW=b.divW=t/3,W.y=c,k.y=D.y=b.y=c+x,W.x=k.x=(g-t)/2,D.x=k.x+k.divW,b.x=D.x+D.divW,W.img1X=k.img1X=D.img1X=b.img1X=0,W.img1Y=x/2.3,k.img1Y=D.img1Y=b.img1Y=60,W.img2X=t/3,k.img2X=D.img2X=b.img2X=0,W.img2Y=x/2.3,k.img2Y=D.img2Y=b.img2Y=l/1.15,W.img3X=2*W.img2X,W.img3Y=x/3,W.textX=t-100,k.textX=D.textX=b.textX=t/3-100,W.textY=k.textY=D.textY=b.textY=30),W.draw(),k.draw(),D.draw(),b.draw()}H(),i.addEventListener("click",(function(){!function(){const t=[W,k,D,b];if("C"===W.tileText.temperature.slice(-1))for(let e=0;e<t.length;e++){let i=parseFloat(t[e].tileText.temperature.slice(0,-3)),a=Math.round(9*i/5+32),r=parseFloat(t[e].tileText.wind.slice(0,-5)),s=Math.round(.621371*r);t[e].tileText.temperature=`${a} °F`,t[e].tileText.wind=`${s} mph`}else for(let e=0;e<t.length;e++){let i=parseFloat(t[e].tileText.temperature.slice(0,-3)),a=Math.round(5*(i-32)/9),r=parseFloat(t[e].tileText.wind.slice(0,-4)),s=Math.round(r/.621371);t[e].tileText.temperature=`${i>32?"+":"-"}${a<0?-1*a:1*a} °C`,t[e].tileText.wind=`${s} km/h`}H()}()})),window.addEventListener("resize",(function(){d=window.innerHeight,g=window.innerWidth,H()})),window.addEventListener("orientationchange",(function(){d=window.innerHeight,g=window.innerWidth,H()}))})();