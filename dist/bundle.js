(()=>{"use strict";var t={d:(e,i)=>{for(var a in i)t.o(i,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:i[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{Do:()=>a,Dt:()=>s,Rm:()=>m,qN:()=>o});class e{x;y;tileH;divW;colour;tileText;textX;textY;img1X;img1Y;img2X;img2Y;img3X;img3Y;date;constructor(t,e,i,a,r,n,s,m,o,g,d,h,l,c){this.x=t,this.y=e,this.tileH=i,this.divW=a,this.colour=r,this.tileText=n,this.textX=s,this.textY=m,this.img1X=o,this.img1Y=g,this.img2X=d,this.img2Y=h,this.img3X=l,this.img3Y=c,this.date=this.tileText.day.split(", ")}draw(){a.globalAlpha=.3,a.fillStyle=this.colour,a.fillRect(this.x,this.y,this.divW,this.tileH),a.beginPath(),a.lineWidth=.1,a.rect(this.x,this.y,this.divW,this.tileH),a.stroke(),a.globalAlpha=1,a.strokeStyle="black",a.fillStyle="white",a.lineWidth=3,a.font="italic  30px LatoWeb",a.strokeText(`${this.date[0]} ~`,15+this.x,33+this.y),a.fillText(`${this.date[0]} ~`,15+this.x,33+this.y),a.font="italic  18px LatoWeb",a.strokeText(`${this.date[1]}`,this.textX+this.x,this.textY+this.y),a.fillText(`${this.date[1]}`,this.textX+this.x,this.textY+this.y),a.drawImage(m,this.x+this.img1X,this.y+this.img1Y,60,60),a.drawImage(o,this.x+this.img2X,this.y+this.img2Y,60,60),this.img3X&&this.img3Y&&a.drawImage(s,this.x+this.img3X,this.y+this.img3Y,100,100)}}const i=document.getElementById("canvas1"),a=i.getContext("2d"),r=new Image,n=new Image,s=new Image,m=new Image,o=new Image,g=["./img/cloudy.png","./img/rain.png","./img/sun.png","./img/thermo.png","./img/wind.png"],d=[r,n,s,m,o];var h=0;for(let t=0;t<d.length;t++)d[t].src=g[t],d[t].onload=()=>{(h+=1)===d.length&&T()};!async function(){let t=function(t){const e=localStorage.getItem("weather");if(e){const t=JSON.parse(e);if(t.expiry&&t.expiry>Date.now())return t.value}return!1}();t||(t=await async function(){try{const t=await fetch("https://goweather.herokuapp.com/weather/london"),e=await t.json();if(![e.temperature,e.wind,e.description,e.forecast[0].day,e.forecast[0].temperature,e.forecast[0].wind,e.forecast[1].day,e.forecast[1].temperature,e.forecast[1].wind,e.forecast[2].day,e.forecast[2].temperature,e.forecast[2].wind].every((t=>"string"==typeof t)))throw"Type error please contact Api administrator";return e}catch(t){alert(`Unable to updatedate reason: ${t}`)}}(),function(t,e){const i={value:e,expiry:Date.now()+9e5};localStorage.setItem("weather",JSON.stringify(i))}(0,t)),v.temperature=t.temperature,v.wind=t.wind,v.description=t.description,W.temperature=t.forecast[0].temperature,W.wind=t.forecast[0].wind,k.temperature=t.forecast[1].temperature,k.wind=t.forecast[1].wind,D.temperature=t.forecast[2].temperature,D.wind=t.forecast[2].wind,T()}();let l=window.innerWidth,c=window.innerHeight,w=150,x=200,y=(c-x-450)/2,p="black",u=l/1.2-100,f=w/2.2,X=l-l/1.2/2,Y=w/2.2;const v={day:(new Date).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),temperature:"0 째C ",wind:"0 km/h",description:"Clear"},W={day:new Date((new Date).getTime()+864e5).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),temperature:"0 째C ",wind:"0 km/h"},k={day:new Date((new Date).getTime()+1728e5).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),temperature:"0 째C ",wind:"0 km/h"},D={day:new Date((new Date).getTime()+2592e5).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),temperature:"0 째C ",wind:"0 km/h"};i.width=l,i.height=c;const H=new e(l-l/1.2/2,y,x,l/1.2,p,v,u,30,0,f,X,Y,0,0),b=new e(l-l/1.2/2,y+x,w,l/1.2,p,W,u,30,0,f,X,Y),I=new e(l-l/1.2/2,y+w+x,w,l/1.2,p,k,u,30,0,f,X,Y),S=new e(l-l/1.2/2,y+300+x,w,l/1.2,p,D,u,30,0,f,X,Y);function T(){let t;i.width=l,c<650&&(c=650),i.height=c,y=(c-x-450)/2,l<1e3?(l<350&&(l=350),t=l/1.2,i.width=l,H.divW=b.divW=I.divW=S.divW=t,b.tileH=I.tileH=S.tileH=w,H.y=y,b.y=y+x,I.y=y+w+x,S.y=y+300+x,H.x=b.x=I.x=S.x=(l-t)/2,H.img1X=b.img1X=I.img1X=S.img1X=0,H.img1Y=x/3,b.img1Y=I.img1Y=S.img1Y=75,H.img2X=0,b.img2X=I.img2X=S.img2X=l/2.5,H.img2Y=x/1.5,b.img2Y=I.img2Y=S.img2Y=75,H.img3X=t-150,H.img3Y=50,H.textX=b.textX=I.textX=S.textX=t-100,H.textY=b.textY=I.textY=S.textY=30):(y=(c-x-w)/2,t=l>1300?1300/1.2:l/1.2,b.tileH=I.tileH=S.tileH=x,H.divW=t,b.divW=I.divW=S.divW=t/3,H.y=y,b.y=I.y=S.y=y+x,H.x=b.x=(l-t)/2,I.x=b.x+b.divW,S.x=I.x+I.divW,H.img1X=b.img1X=I.img1X=S.img1X=0,H.img1Y=100,b.img1Y=I.img1Y=S.img1Y=60,H.img2X=t/3,b.img2X=I.img2X=S.img2X=0,H.img2Y=100,b.img2Y=I.img2Y=S.img2Y=w/1.15,H.img3X=2*H.img2X,H.img3Y=x/3,H.textX=t-100,b.textX=I.textX=S.textX=t/3-100,H.textY=b.textY=I.textY=S.textY=30),H.draw(),b.draw(),I.draw(),S.draw()}T(),window.addEventListener("resize",(function(){c=window.innerHeight,l=window.innerWidth,T()}))})();