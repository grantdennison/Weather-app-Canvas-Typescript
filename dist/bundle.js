(()=>{"use strict";var t={d:(i,e)=>{for(var a in e)t.o(e,a)&&!t.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:e[a]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};t.d({},{Do:()=>a,Dt:()=>s,Rm:()=>g,qN:()=>m});class i{x;y;tileH;divW;colour;tileText;textX;textY;img1X;img1Y;img2X;img2Y;img3X;img3Y;img3TX;img3TY;imageSize;date;offSet;constructor(t,i,e,a,s,g,m,r,n,h,o,l,d,x,c,f,w,X){this.x=t,this.y=i,this.tileH=e,this.divW=a,this.colour=s,this.tileText=g,this.textX=m,this.textY=r,this.img1X=n,this.img1Y=h,this.img2X=o,this.img2Y=l,this.img3X=x,this.img3Y=c,this.img3TX=f,this.img3TY=w,this.imageSize=X,this.offSet=d,this.date=this.tileText.day.split(", ")}draw(){a.globalAlpha=.4,a.fillStyle=this.colour,a.fillRect(this.x,this.y,this.divW,this.tileH),a.beginPath(),a.lineWidth=.2,a.rect(this.x,this.y,this.divW,this.tileH),a.textAlign="left",a.stroke(),a.globalAlpha=1,a.strokeStyle="black",a.fillStyle="white",a.lineWidth=4,a.font="italic  35px LatoWeb",a.strokeText(`${this.date[0]} ~`,15+this.x,33+this.y),a.fillText(`${this.date[0]} ~`,15+this.x,33+this.y),a.textAlign="right",a.font="italic  25px LatoWeb",a.strokeText(this.date[1],this.textX+this.x,this.textY+this.y),a.fillText(this.date[1],this.textX+this.x,this.textY+this.y),a.textAlign="left",a.font="italic  33px LatoWeb",a.strokeText(this.tileText.temperature,this.x+this.img1X+50,this.y+this.img1Y+45-this.offSet),a.fillText(this.tileText.temperature,this.x+this.img1X+50,this.y+this.img1Y+45-this.offSet),a.font="italic  33px LatoWeb",a.strokeText(this.tileText.wind,this.x+this.img2X+60,this.y+this.img2Y+45-this.offSet),a.fillText(this.tileText.wind,this.x+this.img2X+60,this.y+this.img2Y+45-this.offSet),a.drawImage(g,this.x+this.img1X,this.y+this.img1Y,this.imageSize,this.imageSize),a.drawImage(m,this.x+this.img2X,this.y+this.img2Y,this.imageSize,this.imageSize),this.img3X&&this.img3Y&&this.img3TX&&this.img3TY&&(a.drawImage(s,this.x+this.img3X,this.y+this.img3Y,100,100),a.font="italic  30px LatoWeb",a.textAlign="center",a.strokeText(this.tileText.description,this.x+this.img3X+this.img3TX,this.y+this.img3Y+this.img3TY),a.fillText(this.tileText.description,this.x+this.img3X+this.img3TX,this.y+this.img3Y+this.img3TY))}}const e=document.getElementById("canvas1"),a=e.getContext("2d"),s=new Image,g=new Image,m=new Image,r=["./img/sun.png","./img/thermo.png","./img/wind.png"],n=[s,g,m];var h=0;for(let t=0;t<n.length;t++)n[t].src=r[t],n[t].onload=()=>{(h+=1)===n.length&&N()};let o=window.innerWidth,l=window.innerHeight,d=150,x=200,c=(l-x-3*d)/2,f="black",w=o/1.2-120,X=d/2.2,Y=o-o/1.2/2,y=d/2.2,p=1,u=1;const T={day:(new Date).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short",year:"numeric"}),temperature:"0 °C ",wind:"0 km/h",description:"Clear"},v={day:new Date((new Date).getTime()+864e5).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short"}),temperature:"0 °C ",wind:"0 km/h"},S={day:new Date((new Date).getTime()+1728e5).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short"}),temperature:"0 °C ",wind:"0 km/h"},W={day:new Date((new Date).getTime()+2592e5).toLocaleDateString("default",{weekday:"long",day:"2-digit",month:"short"}),temperature:"0 °C ",wind:"0 km/h"};!async function(){let t=await function(t){const i=localStorage.getItem("weather");if(i){const t=JSON.parse(i);return!!(t.expiry&&t.expiry>Date.now())&&t.value}}();!1===t&&(console.log("Server"),t=await async function(){try{const t=await fetch("https://goweather.herokuapp.com/weather/london"),i=await t.json();if(![i.temperature,i.wind,i.description,i.forecast[0].day,i.forecast[0].temperature,i.forecast[0].wind,i.forecast[1].day,i.forecast[1].temperature,i.forecast[1].wind,i.forecast[2].day,i.forecast[2].temperature,i.forecast[2].wind].every((t=>"string"==typeof t)))throw"Type error please contact Api administrator";return i}catch(t){alert(`Unable to updatedate reason: ${t}`)}}(),function(t,i){const e={value:i,expiry:Date.now()+9e5};localStorage.setItem("weather",JSON.stringify(e))}(0,t)),T.temperature=t.temperature,T.wind=t.wind,T.description=t.description,v.temperature=t.forecast[0].temperature,v.wind=t.forecast[0].wind,S.temperature=t.forecast[1].temperature,S.wind=t.forecast[1].wind,W.temperature=t.forecast[2].temperature,W.wind=t.forecast[2].wind,L(),L()}(),e.width=o,e.height=l;const b=new i(o-o/1.2/2,c,x,o/1.2,f,T,w,30,0,X,Y,y,0,0,0,p,u,60),k=new i(o-o/1.2/2,c+x,d,o/1.2,f,v,w,30,0,X,Y,y,0,p=0,u=0,p=0,u=0,60),H=new i(o-o/1.2/2,c+d+x,d,o/1.2,f,S,w,30,0,X,Y,y,0,p=0,u=0,p=0,u=0,60),D=new i(o-o/1.2/2,c+2*d+x,d,o/1.2,f,W,w,30,0,X,Y,y,0,0,0,0,0,60),z=(()=>{const t=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(t)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)?"mobile":"desktop"})();function L(){const t=[b,k,H,D];let i,e,a,s;if("C"===b.tileText.temperature.slice(-1))for(let g=0;g<t.length;g++)e=parseFloat(t[g].tileText.temperature.slice(0,-3)),i=isNaN(e)?"  ?":Math.round(9*e/5+32),a=parseFloat(t[g].tileText.wind.slice(0,-5)),s=isNaN(a)?"  ?":Math.round(.621371*a),t[g].tileText.temperature=`${i} °F`,t[g].tileText.wind=`${s} mph`;else for(let g=0;g<t.length;g++)i=parseFloat(t[g].tileText.temperature.slice(0,-3)),isNaN(i)?e="  ?":(e=Math.round(5*(i-32)/9),e=e<0?"-"+-1*e:`+${e}`),s=parseFloat(t[g].tileText.wind.slice(0,-4)),a=isNaN(s)?"  ?":Math.round(s/.621371),t[g].tileText.temperature=`${e} °C`,t[g].tileText.wind=`${a} km/h`;N()}function N(){if(k.offSet=H.offSet=D.offSet=0,"mobile"===z)A();else if("tablet"===z)I();else{let t;l=window.innerHeight,o=window.innerWidth,b.img3TX=110,b.img3TY=60,e.width=o,l<650&&(l=650),e.height=l,c=(l-x-3*d)/2,o<1e3?(o<400&&(o=400),t=o/1.2,e.width=o,b.divW=k.divW=H.divW=D.divW=t,k.tileH=H.tileH=D.tileH=d,b.y=c,k.y=c+x,H.y=c+d+x,D.y=c+2*d+x,b.x=k.x=H.x=D.x=(o-t)/2,b.img1X=k.img1X=H.img1X=D.img1X=0,b.img1Y=x/3,k.img1Y=H.img1Y=D.img1Y=d/2,b.img2X=0,k.img2X=H.img2X=D.img2X=o/2.5,b.img2Y=x/1.5,k.img2Y=H.img2Y=D.img2Y=d/2,o>570?(b.img3X=t-300,b.img3Y=x/3):(b.img3X=t-140,b.img3Y=x/4.3,b.img3TX=10,b.img3TY=130),b.textX=k.textX=H.textX=D.textX=t-100,b.textY=k.textY=H.textY=D.textY=30):(c=(l-x-d)/2,t=o>1300?1300/1.2:o/1.2,k.tileH=H.tileH=D.tileH=x,b.divW=t,k.divW=H.divW=D.divW=t/3,b.y=c,k.y=H.y=D.y=c+x,b.x=k.x=(o-t)/2,H.x=k.x+k.divW,D.x=H.x+H.divW,b.img1X=k.img1X=H.img1X=D.img1X=0,b.img1Y=x/2.3,k.img1Y=H.img1Y=D.img1Y=d/2.5,b.img2X=t/3,k.img2X=H.img2X=D.img2X=0,b.img2Y=x/2.3,k.img2Y=H.img2Y=D.img2Y=d/1.15,b.img3X=2*b.img2X,b.img3Y=x/3,b.textX=t-100,k.textX=H.textX=D.textX=t/3-100,b.textY=k.textY=H.textY=D.textY=30),a.clearRect(0,0,a.canvas.width,a.canvas.height),b.draw(),k.draw(),H.draw(),D.draw()}}e.addEventListener("click",(function(){L()})),window.addEventListener("resize",(function(){N()})),screen.orientation.addEventListener("change",(function(){}));const A=()=>{o=screen.availWidth-20,l=screen.availHeight-20,k.offSet=H.offSet=D.offSet=0,e.width=o,e.height=l,c=10;let t=o;screen.width<screen.height?(d=l/5,b.divW=k.divW=H.divW=D.divW=t,b.tileH=2*d,k.tileH=H.tileH=D.tileH=d,x=2*d,b.y=c,k.y=c+x,H.y=c+d+x,D.y=c+2*d+x,b.x=k.x=H.x=D.x=(o-t+20)/2,k.imageSize=H.imageSize=D.imageSize=50,b.img1X=k.img1X=H.img1X=D.img1X=0,b.img1Y=x/3,k.img1Y=H.img1Y=D.img1Y=d/2,b.img2X=0,k.img2X=H.img2X=D.img2X=o/2,b.img2Y=x/1.5,k.img2Y=H.img2Y=D.img2Y=d/2,b.img3X=t-160,b.img3Y=x/2.8,b.img3TX=50,b.img3TY=160,b.textX=k.textX=H.textX=D.textX=t-20):(d=l/7,x=4*d,d*=3,b.tileH=x,k.tileH=H.tileH=D.tileH=d,b.divW=t,k.divW=H.divW=D.divW=t/3,b.y=c,k.y=H.y=D.y=c+x,b.x=k.x=(o-t+15)/2,H.x=k.x+k.divW,D.x=H.x+H.divW,k.imageSize=H.imageSize=D.imageSize=40,k.offSet=H.offSet=D.offSet=15,b.img1X=k.img1X=H.img1X=D.img1X=0,b.img1Y=x/2.3,k.img1Y=H.img1Y=D.img1Y=d/3,b.img2X=t/3.5,k.img2X=H.img2X=D.img2X=0,b.img2Y=x/2.3,k.img2Y=H.img2Y=D.img2Y=d/3*2,b.img3X=2*b.img2X,b.img3Y=x/3,b.textX=t-100,k.textX=H.textX=D.textX=t/3-20,b.textY=k.textY=H.textY=D.textY=30,b.img3TX=200,b.img3TY=70),a.clearRect(0,0,a.canvas.width,a.canvas.height),b.draw(),k.draw(),H.draw(),D.draw()},I=()=>{screen.width,screen.height};N()})();